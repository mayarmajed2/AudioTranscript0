# تطبيق النسخ الصوتي ومعالجة المحاضرات

تطبيق متطور للنسخ الصوتي يتخصص في تحويل الكلام إلى نص باللغتين العربية المصرية والإنجليزية، مع معالجة أخطاء قوية وإدارة تكيفية لطلبات API. يوفر التطبيق قدرات نسخ محسنة للتسجيلات الصوتية المتنوعة مع معالجة ذكية ووظائف تحليلية متقدمة.

## الميزات الرئيسية:

- نسخ صوتي متعدد اللغات مع دعم خاص للعربية المصرية والإنجليزية
- تلخيص تلقائي للتسجيلات الصوتية
- استخراج النقاط الرئيسية من التسجيلات الصوتية
- مقارنة التسجيل الصوتي مع مواد المحاضرة لتحديد المعلومات الفريدة
- تقسيم تلقائي للملفات الصوتية الكبيرة (أكثر من 15 دقيقة)
- آلية متطورة للتعامل مع أخطاء API
- دعم احتياطي للنسخ الصوتي والتلخيص عند عدم توفر خدمات OpenAI
- نسخ مباشر باستخدام ChatGPT للملفات الصوتية

## متطلبات التشغيل:

- Python 3.8 أو أحدث
- مفتاح OpenAI API (اختياري - سيستخدم التطبيق طرق النسخ البديلة إذا لم يتوفر)
- المكتبات المذكورة في ملف requirements.txt

## طرق النسخ الصوتي المدعومة:

1. **OpenAI Whisper API** (الأسلوب المفضل للدقة العالية):
   - يتطلب مفتاح OpenAI API
   - يدعم اللغة العربية المصرية بشكل متميز
   - الأكثر دقة خاصة مع اللهجات المحلية والمصطلحات التقنية

2. **Google Speech Recognition** (النسخ الاحتياطي الأول):
   - يعمل عندما لا يتوفر مفتاح OpenAI API
   - يتطلب اتصال بالإنترنت
   - دقة جيدة مع اللغة الإنجليزية، متوسطة مع العربية

3. **CMU Sphinx** (النسخ الاحتياطي الثاني - يعمل دون إنترنت):
   - يعمل بشكل كامل دون اتصال بالإنترنت
   - لا يتطلب أي مفاتيح API
   - دقة متوسطة إلى منخفضة، خاصة مع اللغة العربية

## كيفية الإعداد:

1. قم بتثبيت المكتبات المطلوبة:
   ```
   pip install -r requirements.txt
   ```

2. إعداد مفتاح OpenAI API (اختياري):
   - أضف المفتاح كمتغير بيئي: `OPENAI_API_KEY=your_api_key_here`
   - إذا لم يتوفر مفتاح، سيستخدم التطبيق تلقائيًا طرق النسخ البديلة

3. تشغيل التطبيق:
   ```
   gunicorn --bind 0.0.0.0:5000 --reuse-port --reload main:app
   ```

## كيفية الاستخدام:

1. قم بزيارة الصفحة الرئيسية في المتصفح
2. ارفع ملف صوتي (يدعم MP3, WAV, M4A, OGG)
3. اختياريًا، يمكنك رفع ملف محاضرة (PDF أو TXT)
4. اختر أسلوب النسخ المفضل (Whisper API، Google Speech، CMU Sphinx)
5. انقر على "Process" وانتظر النتائج
6. استعرض الملخص والنص المنسوخ والنقاط الرئيسية، وقم بتنزيلها حسب الحاجة
   - يمكنك تنزيل الملخص من خلال الضغط على زر "Download Summary" في أعلى صفحة النتائج
   - يمكنك أيضًا تنزيل النقاط الرئيسية أو النص الكامل بنفس الطريقة

## استخدام سكريبت النسخ السريع:

للنسخ السريع لملف صوتي باستخدام OpenAI Whisper API:

```
python chatgpt_transcribe.py
```

للنسخ السريع باستخدام طرق احتياطية، يمكنك استخدام سكريبت معزز مع خيارات متنوعة:

```
python quick_transcribe.py --help
```

خيارات استخدام السكريبت:
```
  --file FILE, -f FILE     مسار الملف الصوتي (الافتراضي: attached_assets/Voice 104.mp3)
  --method {google,sphinx}, -m {google,sphinx}
                        طريقة النسخ المفضلة (الافتراضي: google)
  --summarize, -s       توليد ملخص للنص المنسوخ
  --output OUTPUT, -o OUTPUT
                        مسار ملف الإخراج (الافتراضي: transcription_result.txt)
```

أمثلة استخدام متقدمة:

1. نسخ ملف صوتي مخصص مع تلخيص:
```
python quick_transcribe.py --file "path/to/your/audio.mp3" --summarize
```

2. استخدام طريقة نسخ مختلفة والحفظ في ملف محدد:
```
python quick_transcribe.py --method sphinx --output "my_transcription.txt"
```

## تحسين الأداء:

- للتسجيلات الطويلة جدًا (أكثر من ساعة)، قم بتقسيمها يدويًا إلى أجزاء أصغر للحصول على أفضل النتائج
- استخدم ملفات صوتية عالية الجودة للحصول على دقة أعلى في النسخ
- بالنسبة للغة العربية المصرية، يعطي Whisper API أفضل النتائج

## ملاحظات هامة:

- عند استخدام OpenAI API، قد تواجه قيود في معدل الطلبات - توقع تأخيرات عند معالجة الملفات الكبيرة
- آلية النسخ الاحتياطي تعمل تلقائيًا عند عدم توفر مفتاح API أو عندما تفشل طلبات API
- تأكد من أن لديك مساحة تخزين كافية عند معالجة الملفات الصوتية الكبيرة